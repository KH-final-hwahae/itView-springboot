<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>상품 등록 페이지</title>
	<link href="/css/seller/productInsertPage.css"rel="stylesheet" type="text/css" />
	<link href="/summernote/summernote-lite.css" rel="stylesheet"/>
<!-- 	<link href="../../../static/css/seller/sidebar.css" rel="stylesheet"/> -->
	<script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
	<script src="/summernote/summernote-lite.js"></script>
	<script src="/summernote/summernote-ko-KR.js"></script>
</head>
<body>

	<div class="header">판매자님, 환영합니다.</div>
<!-- 	<div th:replace="~{views/common/sidebar :: sidebar}"></div> -->

	<div class="layout">

		<div class="content">
			<h2>상품 등록 페이지</h2>
			<form>
				<div class="form-group">
					<label>상품명</label> <input type="text" placeholder="상품명을 입력하세요" />
				</div>

				<div class="form-group">
					<label>상품 설명</label>
					<textarea id="summernote" name="editordata"></textarea>
				</div>

				<div class="form-group">
					<label>제조 회사</label> <input type=text placeholder="제조 회사명을 입력하세요" />
				</div>

				<div class="form-group">
					<label>상품 대표 이미지</label> <input type="file" multiple/>
				</div>

				<div class="form-group">
					<label>재고 수량</label> <input type="number" min="0" />
				</div>

				<div class="form-group">
					<label>상품 가격</label> <input type="number" min="0" />
				</div>

				<!-- 카테고리 선택 -->
				<div class="form-group">
					<label>카테고리</label>

					<!-- 대분류 버튼 그룹 -->
					<div class="option-group">
						<div class="option-row" id="main-category"></div>
					</div>

					<!-- 소분류 버튼 그룹 -->
					<div class="option-group">
						<div class="option-row" id="sub-category"></div>
					</div>
				</div>

				<div class="form-group">
					<label>상품 정보</label>

					<div class="option-group">
						<p class="option-title">추천 피부 타입</p>
						<div class="option-row">
							<button type="button" class="option-button">건성</button>
							<button type="button" class="option-button">지성</button>
							<button type="button" class="option-button">민감성</button>
							<button type="button" class="option-button">복합성</button>
							<button type="button" class="option-button">수부지</button>
						</div>
					</div>

					<div class="option-group">
						<p class="option-title">추천 연령</p>
						<div class="option-row">
							<button type="button" class="option-button">모든 연령</button>
							<button type="button" class="option-button">10대</button>
							<button type="button" class="option-button">20대</button>
							<button type="button" class="option-button">30대</button>
							<button type="button" class="option-button">40대</button>
							<button type="button" class="option-button">50대</button>
							<button type="button" class="option-button">60대</button>
						</div>
					</div>

					<div class="option-group">
						<p class="option-title">추천 성별</p>
						<div class="option-row">
							<button type="button" class="option-button">남자</button>
							<button type="button" class="option-button">여자</button>
							<button type="button" class="option-button">모든 성별</button>
						</div>
					</div>

					<div class="option-group">
						<p class="option-title">퍼스널컬러</p>
						<div class="option-row">
							<button type="button" class="option-button">봄 웜톤</button>
							<button type="button" class="option-button">여름 쿨톤</button>
							<button type="button" class="option-button">가을 웜톤</button>
							<button type="button" class="option-button">겨울 쿨톤</button>
							<button type="button" class="option-button">해당 없음</button>
						</div>
					</div>

					<div class="option-group">
						<p class="option-title">피부 태그</p>
						<div class="option-row">
							<button type="button" class="option-button">미백/잡티</button>
							<button type="button" class="option-button">피지/블랙헤드</button>
							<button type="button" class="option-button">속건조</button>
							<button type="button" class="option-button">주름/탄력</button>
							<button type="button" class="option-button">각질</button>
						</div>
					</div>

					<div class="option-group">
						<p class="option-title">두피/모발</p>
						<div class="option-row">
							<button type="button" class="option-button">탈모</button>
							<button type="button" class="option-button">손상모</button>
							<button type="button" class="option-button">열감두피</button>
							<button type="button" class="option-button">지성두피</button>
							<button type="button" class="option-button">비듬/각질</button>
							<button type="button" class="option-button">해당 없음</button>
						</div>
					</div>
				</div>

				<div class="form-buttons">
					<button type="submit">완료</button>
					<button type="button">취소</button>
				</div>
			</form>
		</div>
	</div>

<script>
	// 상품 설명 작성
	$('#summernote').summernote({
		toolbar : [
			['fontname', ['fontname']],
			['fontsize', ['fontsize']],
			['style', ['bold', 'italic', 'underline', 'strikethrough', 'clear']],
			['color', ['forecolor', 'color']],
			['table', ['table']],
			['para', ['ul', 'ol', 'paragraph']],
			['height', ['height']],
			['insert', ['picture', 'link', 'video']]
		],
		fontNames: ['Arial', 'Arial Black', 'Comic Sans MS', 'Courier New', '맑은 고딕', '궁서', '굴림체', '굴림', '돋움체', '바탕체'],
		fontSizes: ['8', '9', '10', '11', '12', '14', '16', '18', '20', '22', '24', '28', '30', '36', '50', '72'],
		height: 450,
		lang: "ko-KR",
		
		
		// 이미지 업로드 처리
		callbacks : {
			onImageUpload : function(files, editor, welEditable){
				// 다중 이미지 처리를 위해 for문 사용
				for (let i = 0; i < files.length; i++){
					imageUploader(files[i], this);
				}
			}
		}
	});
	
	function imageUploader(file, el){
		let formData = new FormData();
		formData.append('file', file);
		
		$.ajax({
			url : '/seller/imageUpload',
			type : 'post',
			data : formData,
			enctype : 'multipart/form-data',
			processData : false,
			contentType : false,
			success : function(data){
				$(el).summernote('editor.insertImage', data.url);
			},
			error : data => console.log(data)
		});
	}
  // 대분류 및 소분류 데이터
  const categories = {
    "스킨케어": ["스킨/토너", "에센스/세럼/앰플", "크림", "로션", "미스트/오일"],
    "클렌징": ["클렌징폼/젤", "오일/밤", "워터/밀크", "필링/스크럽", "티슈/패드", "립&아이리무버"],
    "메이크업": ["립메이크업", "베이스메이크업", "아이메이크업"],
    "헤어케어": ["샴푸/린스", "트리트먼트/팩", "헤어에센스", "염색약/펌"],
    "바디케어": ["샤워/입욕", "핸드케어", "풋케어", "제모/왁싱", "데오드란트"],
    "선케어": ["선크림", "선스틱", "선쿠션", "선스프레이/선패치", "태닝"],
    "맨즈케어": ["스킨케어", "메이크업", "쉐이빙/왁싱", "바디케어", "헤어케어"],
    "마스크팩": ["시트팩", "패드", "페이셜팩", "코팩", "패치"]
  };

  const mainCategoryEl = document.getElementById("main-category");
  const subCategoryEl = document.getElementById("sub-category");

  let selectedMain = null;
  let selectedSub = null;

  // 대분류 버튼 생성
  Object.keys(categories).forEach(main => {
    const btn = document.createElement("button");
    btn.type = "button";
    btn.textContent = main;
    btn.className = "option-button";
    btn.addEventListener("click", () => {
      selectedMain = main;
      selectedSub = null;

      // 버튼 UI 갱신
      document.querySelectorAll("#main-category .option-button").forEach(b => b.classList.remove("active"));
      btn.classList.add("active");

      // 소분류 버튼 생성
      subCategoryEl.innerHTML = "";
      categories[main].forEach(sub => {
        const subBtn = document.createElement("button");
        subBtn.type = "button";
        subBtn.textContent = sub;
        subBtn.className = "option-button";
        subBtn.addEventListener("click", () => {
          selectedSub = sub;

          // 소분류 버튼 UI 갱신
          document.querySelectorAll("#sub-category .option-button").forEach(b => b.classList.remove("active"));
          subBtn.classList.add("active");

          // 👉 여기에 선택된 카테고리 처리 코드 넣으면 됨 (예: 숨겨진 input에 저장)
          console.log("선택됨:", selectedMain, selectedSub);
        });
        subCategoryEl.appendChild(subBtn);
      });
    });
    mainCategoryEl.appendChild(btn);
  });
</script>
</body>
</html>
